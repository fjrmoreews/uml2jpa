package gen;
import javax.validation.constraints.*;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;
 
[%var allAttributes = aClass.attributes;%]
[%
    var parentSet =aClass.generalization.general.name; 
	var extendsClass="";
 
	if(not parentSet.isEmpty()){  
	   extendsClass+="extends ";
	   extendsClass+=parentSet.get(0).firstToUpperCase();

	} %]
	
 [% var allOperations = aClass.operations; %]
 
public class  [%=aClass.name.firstToUpperCase()%] [%=extendsClass%]  {
 //declarations
[% for (feature in aClass.features) { %]
   [% if (feature.aggregation.value == 0) { %]
       
	[%=feature.declare()%]
   [% } else { %]
      [% } %]  
      
[% } %]
//getter
[% for (feature in aClass.features) { %]
   [% if (feature.aggregation.value == 0) { %]
 
	[%=feature.getter()%]
      
   [% } else { %]
      [% } %]
[% } %]
//setter
[% for (feature in aClass.features) { %]
   [% if (feature.aggregation.value == 0) { %]
   
	[%=feature.setter()%]
   [% } else { %]
      [% } %]      
[% } %]

[%for (a in Association.allInstances){%]
	[%if (a.getMemberEnds.aggregation[0].value == 0) { %]
	[% } else { %]

	[%=a.getMemberEnds.visibility[0]%] List<[%=a.getMemberEnds.name[0]%]> [%=a.getMemberEnds.name[0]%] = new ArrayList<[%=a.getMemberEnds.name[0]%]> ();

//AssociationImpl.getOwnedEnds:[%=a.getOwnedEnds()%]
//AssociationImpl.getMemberEnds:[%=a.getMemberEnds()%]

	[%}%]
[%}%]
[%for(anOperation in allOperations) { %]

//     [%=anOperation.visibility%]  [%=anOperation.type.name%]  [%=anOperation.name%]() {

[%}%]
}

   [%
  @template
  operation Feature myType() { 
    var attType="Object";
     var typeParentSet ="";
    if (self.type.class.getSimpleName() == "PrimitiveTypeImpl"){
    
      if (self.type.eProxyURI == null){
         attType=self.type.name;
      }else{
          attType=self.type.eProxyURI.fragment();
      }  
     
      
      }
    if (self.type.class.getSimpleName() == "ClassImpl"){ 
      attType=self.type.name.firstToUpperCase();
      //typeParentSet =self.type.class.generalization.general.name;
    }    
	%] [%=attType%][% }
%]


[%
  @template
  operation Feature getter() { 
    
  %]
    /**
     * Gets the value of [%=self.name%]
     
     class:[%=self.type.class%]
      classS:[%=self.type.class.getSimpleName()%]
      typeToString:[%=self.type%]
      typeName:[%=self.type.name%]
      
      [% if (self.type.class.getSimpleName() == "PrimitiveTypeImpl"){%]
        eProxyURI:[%=self.type.eProxyURI%]
        
        [% 
         if (self.type.eProxyURI == null){
           %]eProxyURI:null[%  
      		}else{
           %]
          nofragment:[%=self.type.eProxyURI.trimFragment()%]
          fragment:[%=self.type.eProxyURI.fragment()%]
           [%
      		}  
        %]
      [%
      } %]
      
     */
public [%=self.myType()%] get[%=self.name.firstToUpperCase()%]() {
	return this.[%=self.name.firstToLowerCase()%];
}
  [% } %]
  
  
   [%
  @template
  operation Feature setter() { %]
    /**
     * Sets the value of [%=self.name%]
     */
public void set[%=self.name.firstToUpperCase()%]([%=self.myType()%] [%=self.name%]) {
	this.[%=self.name%] = [%=self.name%];
}
   [% }
%]

 
    [%
    @template
  operation Feature declare() { %]
    /**
     * declaration [%=self.name%]
     */ 
   [%for(prop in self.getRedefinedProperties()){%]
@[%=prop.name%] 
   [%}%]  
[%=self.visibility%]  [%=self.myType()%] [%=self.name%];
   [% }
%]

	[%
	@template
	operation Feature correctPrimType() { 
	var type=""; 
	var date="";
  	 if (self.type.name.equals("String")){
  	 	type=self.myType().firstToUpperCase();
  	 }
  	 if (self.type.name.equals("EDate")){
  	 	date=self.myType().substring(2,6).toLowerCase();
  	 	type=date.firstToUpperCase();
  	 }
  	 if (self.type.name.equals("Integer")){
  		type=self.myType().substring(0,4).toLowerCase();
 	 }
 	 if (self.type.name.startsWith("E") and not self.type.name.equals("EDate")) {
  		type=self.myType().replace("E","").toLowerCase();
   	} 
   	%] [%=type%] 
 	
 	[%}%]

    [%
    @template
  operation Feature info() { %]
    /******************
     *0 !!!info [%=self.name%] 
   [%for(prop in self.getRedefinedProperties()){%]
   *1			@[%=prop.name%] 
   [%}%]  
   *2  [%=self.visibility%] [%=self.myType()%] [%=self.name%];
   *3  [%=self.toString()%]
   *4  aggregation:[%=self.aggregation%]
    
    [%  if (self.association == null){  %]
          5.001 : self.association == null
   [%  }else{ %]
      		5.002 : self.association != null ,  
      		[%=self.association.isBinary()%] 
      		 
    [% } %]
                
    
   *****************/
   [% } %]
